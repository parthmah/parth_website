<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="description" content="Page not found ‚Äî Parth Maheshwari's personal website">
    <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#121212" media="(prefers-color-scheme: dark)">
    
    <!-- Performance optimizations -->
    <link rel="preload" href="styles/critical.css" as="style">
    <link rel="preload" href="styles.css" as="style">
    
    <title>404 ‚Äì Page Not Found | Parth Maheshwari</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <!-- Header component -->
    <div id="header-component"></div>

    <main class="centered-page">
        <div class="notfound-container">
            <div class="notfound-emoji home-link" style="font-size:8rem; margin-bottom:3rem; cursor:pointer;" aria-hidden="true">‚õìÔ∏è‚Äçüí•</div>
            <h1>404 - Uh Oh!</h1>
            <!-- Use button component for homepage button -->
            <div id="return-home-btn"></div>
        </div>
    </main>

    <!-- Footer component -->
    <div id="footer-component"></div>

    <!-- Critical JavaScript - External theme file to avoid CSP issues -->
    <script src="js/theme-inline.js"></script>
    
    <!-- Mock API for local development -->
    <script src="js/mock-api.js"></script>

    <!-- Components loading -->
    <script src="js/components.js"></script>

    <!-- Non-critical JavaScript - Load after page render -->
    <script>
        window.addEventListener('load', function() {
            // Load UI enhancements
            const script = document.createElement('script');
            script.src = '/js/ui.js';
            script.onload = function() {
                if (typeof initHoverEffects === 'function') {
                    initHoverEffects();
                }
            };
            document.head.appendChild(script);
            
            // Load and configure the button component
            loadButtonComponent();
        });
        
        function loadButtonComponent() {
            fetch('/components/button.html')
                .then(response => response.text())
                .then(html => {
                    // Replace template variables
                    const buttonHtml = html
                        .replace('{{text}}', 'Return to Homepage')
                        .replace('{{ariaLabel}}', 'Return to Homepage');
                    
                    // Insert the button
                    const buttonContainer = document.getElementById('return-home-btn');
                    if (buttonContainer) {
                        buttonContainer.innerHTML = buttonHtml;
                        
                        // Add click handler to make the button functional
                        const button = buttonContainer.querySelector('.button');
                        if (button) {
                            button.addEventListener('click', () => {
                                window.location.href = '/';
                            });
                        }
                    }
                })
                .catch(error => {
                    console.error('Failed to load button component:', error);
                    // Fallback: create a simple link if component loading fails
                    const buttonContainer = document.getElementById('return-home-btn');
                    if (buttonContainer) {
                        buttonContainer.innerHTML = '<a href="/" class="button">Return to Homepage</a>';
                    }
                });
        }
    </script>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch(err => {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }
    </script>
</body>
</html>
